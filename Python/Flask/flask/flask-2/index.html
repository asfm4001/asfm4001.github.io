<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"asfm4001.github.io","root":"/","images":"/images","scheme":"Mist","darkmode":true,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœå°‹...","empty":"æˆ‘å€‘ç„¡æ³•æ‰¾åˆ°ä»»ä½•æœ‰é—œ ${query} çš„æœç´¢çµæœ","hits_time":"${hits} æ‰¾åˆ° ${time} å€‹çµæœ","hits":"æ‰¾åˆ° ${hits} å€‹çµæœ"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="å‰è¨€æˆ‘å€‘åœ¨æœ¬åœ°é–‹ç™¼å¥½flaskå¾Œï¼Œåˆ°åº•å¦‚ä½•å°‡å·²ç¶“é–‹ç™¼å¥½çš„flaskéƒ¨ç½²åˆ°ç¶²è·¯ç•¶ä¸­?ç¶²è·¯ä¸­æŸ¥äº†å¾ˆå¤šè³‡æ–™ï¼ŒWSGI serverã€Nginxã€Proxy serverã€Reverse Proxyç­‰ç­‰å…¶å¯¦å„å€‹ç’°ç’°ç›¸æ‰£ï¼Œä½¿ç”¨é€™äº›å·¥å…·æé«˜æˆ‘å€‘serverçš„æ•ˆç‡èˆ‡å®‰å…¨æ€§ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Flask æ¦‚å¿µèˆ‡å¯¦ä½œ(äºŒ) - Web serveræ¦‚å¿µ">
<meta property="og:url" content="https://asfm4001.github.io/Python/Flask/flask/flask-2/">
<meta property="og:site_name" content="MC">
<meta property="og:description" content="å‰è¨€æˆ‘å€‘åœ¨æœ¬åœ°é–‹ç™¼å¥½flaskå¾Œï¼Œåˆ°åº•å¦‚ä½•å°‡å·²ç¶“é–‹ç™¼å¥½çš„flaskéƒ¨ç½²åˆ°ç¶²è·¯ç•¶ä¸­?ç¶²è·¯ä¸­æŸ¥äº†å¾ˆå¤šè³‡æ–™ï¼ŒWSGI serverã€Nginxã€Proxy serverã€Reverse Proxyç­‰ç­‰å…¶å¯¦å„å€‹ç’°ç’°ç›¸æ‰£ï¼Œä½¿ç”¨é€™äº›å·¥å…·æé«˜æˆ‘å€‘serverçš„æ•ˆç‡èˆ‡å®‰å…¨æ€§ã€‚">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2024-11-11T02:46:30.000Z">
<meta property="article:modified_time" content="2024-12-03T05:51:21.057Z">
<meta property="article:author" content="Muchian">
<meta property="article:tag" content="python">
<meta property="article:tag" content="flask">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://asfm4001.github.io/Python/Flask/flask/flask-2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-TW","comments":true,"permalink":"https://asfm4001.github.io/Python/Flask/flask/flask-2/","path":"Python/Flask/flask/flask-2/","title":"Python Flask æ¦‚å¿µèˆ‡å¯¦ä½œ(äºŒ) - Web serveræ¦‚å¿µ"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Python Flask æ¦‚å¿µèˆ‡å¯¦ä½œ(äºŒ) - Web serveræ¦‚å¿µ | MC</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ›å°èˆªæ¬„" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">MC</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœå°‹" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é </a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†é¡</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>é—œæ–¼</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>æ­¸æª”</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®éŒ„
        </li>
        <li class="sidebar-nav-overview">
          æœ¬ç«™æ¦‚è¦
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2Server"><span class="nav-number">2.</span> <span class="nav-text">éƒ¨ç½²Server</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#App-Server"><span class="nav-number">2.1.</span> <span class="nav-text">App Server</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Web-Server"><span class="nav-number">2.2.</span> <span class="nav-text">Web Server</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Reverse-Proxy-Forward-Proxy"><span class="nav-number">2.3.</span> <span class="nav-text">Reverse Proxy &amp; Forward Proxy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Web-server-Load-Balance"><span class="nav-number">2.4.</span> <span class="nav-text">Web server(Load Balance)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B5%90%E8%AB%96"><span class="nav-number">3.</span> <span class="nav-text">çµè«–</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Reference"><span class="nav-number">3.1.</span> <span class="nav-text">Reference</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Muchian</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">39</span>
          <span class="site-state-item-name">æ–‡ç« </span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">åˆ†é¡</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">æ¨™ç±¤</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/asfm4001" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;asfm4001" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="å›åˆ°é ‚ç«¯">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://asfm4001.github.io/Python/Flask/flask/flask-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Muchian">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MC">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Python Flask æ¦‚å¿µèˆ‡å¯¦ä½œ(äºŒ) - Web serveræ¦‚å¿µ | MC">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Python Flask æ¦‚å¿µèˆ‡å¯¦ä½œ(äºŒ) - Web serveræ¦‚å¿µ
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

      <time title="å‰µå»ºæ™‚é–“ï¼š2024-11-11 10:46:30" itemprop="dateCreated datePublished" datetime="2024-11-11T10:46:30+08:00">2024-11-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
      <time title="ä¿®æ”¹æ™‚é–“ï¼š2024-12-03 13:51:21" itemprop="dateModified" datetime="2024-12-03T13:51:21+08:00">2024-12-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/Flask/" itemprop="url" rel="index"><span itemprop="name">Flask</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="é–±è®€æ¬¡æ•¸" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é–±è®€æ¬¡æ•¸ï¼š</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æ–‡ç« å­—æ•¸ï¼š</span>
      <span>3.1k</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æˆ‘å€‘åœ¨æœ¬åœ°é–‹ç™¼å¥½flaskå¾Œï¼Œåˆ°åº•å¦‚ä½•å°‡å·²ç¶“é–‹ç™¼å¥½çš„flaskéƒ¨ç½²åˆ°ç¶²è·¯ç•¶ä¸­?ç¶²è·¯ä¸­æŸ¥äº†å¾ˆå¤šè³‡æ–™ï¼ŒWSGI serverã€Nginxã€Proxy serverã€Reverse Proxyç­‰ç­‰å…¶å¯¦å„å€‹ç’°ç’°ç›¸æ‰£ï¼Œä½¿ç”¨é€™äº›å·¥å…·æé«˜æˆ‘å€‘serverçš„æ•ˆç‡èˆ‡å®‰å…¨æ€§ã€‚</p>
<span id="more"></span>

<hr>
<p>ç›®å‰ <em><strong>Python Flask æ¦‚å¿µèˆ‡å¯¦ä½œ</strong></em> å¤§è‡´è¦åŠƒç‚º</p>
<ol>
<li><a href="https://asfm4001.github.io/Python/Flask/pythonFlask/flask-0/">ä½ˆç½®ç’°å¢ƒ</a></li>
<li><a href="https://asfm4001.github.io/Python/Flask/pythonFlask/flask-1/">Flask modelé‹ç”¨(ä¸€)</a></li>
<li>Web serveræ¦‚å¿µ(äºŒ)</li>
<li><a href="https://asfm4001.github.io/Python/Flask/pythonFlask/flask-3/">å°ˆæ¡ˆæª”æ¡ˆåˆ†ä½ˆ(ä¸‰)</a></li>
<li><a href="https://asfm4001.github.io/Python/Flask/pythonFlask/flask-3/">é€£æ¥è³‡æ–™åº«(å››)</a></li>
<li><a href="https://asfm4001.github.io/Python/Flask/pythonFlask/flask-5/">æ¸²æŸ“æ¨¡æ¿(äº”)</a></li>
<li><a href="https://asfm4001.github.io/Python/Flask/pythonFlask/flask-6/">ç™»å…¥åŠŸèƒ½(å…­)</a></li>
<li><a href="https://asfm4001.github.io/Python/Flask/pythonFlask/flask-7/">BlogåŠŸèƒ½(ä¸ƒ)</a></li>
</ol>
<p>åœ¨é–‹ç™¼éç¨‹ä¸­ï¼ŒTest(æ¸¬è©¦)å…¶å¯¦ä¹Ÿå¾ˆé‡è¦ï¼Œä½†ç¤™æ–¼ç¼ºä¹ç¶“é©—ï¼Œè‹¥ä¹‹å¾Œæœ‰æœ›çš„è©±å†è£œä¸Š(å°ˆæ¡ˆæ‰“åŒ…ã€ç¶²ç«™å„ªåŒ–ç­‰ç­‰äº¦åŒ)</p>
<hr>
<h3 id="éƒ¨ç½²Server"><a href="#éƒ¨ç½²Server" class="headerlink" title="éƒ¨ç½²Server"></a>éƒ¨ç½²Server</h3><p>åœ¨ä¸Šç¯€<a href="https://asfm4001.github.io/Python/Flask/pythonFlask/flask-1/">Flask modelé‹ç”¨</a>æ™‚ï¼Œæˆ‘å€‘æ­å»ºä¸€å€‹æœ¬åœ°ç«¯çš„Serverï¼Œä½†è¦çœŸæ­£éƒ¨ç½²ä¸€å€‹ã€Œè¶³å¤ å®‰å…¨ã€serverä»é é ä¸å¤ ã€‚<br>é¦–å…ˆï¼Œå¤§éƒ¨åˆ†çš„ç¶²ç«™éƒ½æœƒæœ‰è³‡æ–™åº«(database, DB)ï¼Œè€Œå¯¦éš›çš„ç‹€æ³èˆ‡æˆ‘å€‘é–‹ç™¼æ™‚ä½¿ç”¨çš„SQLiteä¸åŒçš„æ˜¯ï¼šDBä¸¦ä¸æœƒèˆ‡ç¶²ç«™å­˜åœ¨ç›¸åŒçš„Serverä¸»æ©Ÿç•¶ä¸­ã€‚è€Œæ˜¯å„²å­˜åœ¨ä¸€å€‹å–®ç¨çš„DB serverä¸¦ä¸”åªå…è¨±ä½ çš„Flask(App server)ä¾†åšå­˜å–çš„è¡Œç‚ºï¼Œå€˜è‹¥Useræƒ³è¦å­˜å–DB serverä¸­çš„è³‡æ–™æ™‚ï¼Œå¿…é ˆé€éApp serveræ‰èƒ½ç²å¾—è³‡æ–™ã€‚(App serverå¯ä»¥æ§ç®¡Userçš„å­˜å–è¡Œç‚º)</p>
<blockquote class="imgur-embed-pub" lang="en" data-id="a/GWY3Oad"  >
    <a target="_blank" rel="noopener" href="//imgur.com/a/GWY3Oad">User and Server &amp; DB server</a>
</blockquote>
<script async src="//s.imgur.com/min/embed.js" charset="utf-8"></script>

<h4 id="App-Server"><a href="#App-Server" class="headerlink" title="App Server"></a>App Server</h4><p>ç„¶è€Œï¼Œé€™ç¨®éƒ¨ç½²æ–¹å¼é›–ç„¶å¯è¡Œï¼Œä½†ä»å­˜åœ¨ä¸€äº›å•é¡Œï¼š</p>
<ol>
<li>éš¨è‘—ç¶²ç«™è¦æ¨¡è®Šå¤§ï¼Œè‹¥æœ‰å¤§é‡çš„è«‹æ±‚(request)åŒæ™‚ç™¼é€åˆ°App serveræ™‚(ç„¡è«–æ˜¯å¦ç‚ºæƒ¡æ„æ”»æ“Š)ï¼ŒFlaskæ•ˆèƒ½ä¸¦ä¸å¥½ï¼Œä¹Ÿä¸å¤ ç©©å®š(ç•¢ç«ŸFlaskä¹Ÿåªæ˜¯å–®é€²ç¨‹)ã€‚</li>
<li>Userå‘Serverç™¼é€çš„æ˜¯HTTP requestï¼Œåœ¨Pythonä¸­æ˜¯ä½¿ç”¨WSGI(Python Web Server GateWay Interface)å”å®šæ“ä½œHTTP requestèˆ‡responseï¼Œé›–ç„¶Flaskå…§å»ºWSGI serverä½†æ•ˆèƒ½åƒ…åƒ…åªè¶³å¤ é–‹ç™¼ä½¿ç”¨ã€‚</li>
</ol>
<p>å› æ­¤ï¼Œæˆ‘å€‘éœ€è¦ä¸€å€‹å°ˆé–€çš„WSGI serveréƒ¨ç½²Flask(App process)ï¼Œè€Œå¸¸è¦‹çš„Gunicorm(æ“ä½œè¼ƒç°¡å–®)æˆ–uWSGI(æ•ˆèƒ½è¼ƒä½³)éƒ½æ˜¯ä¸éŒ¯çš„é¸æ“‡ï¼Œé€™è£¡æˆ‘å€‘é¸æ“‡Gunicormä½œç‚ºç¤ºç¯„ã€‚</p>
<blockquote class="imgur-embed-pub" lang="en" data-id="a/IrV5kdX">
<a target="_blank" rel="noopener" href="//imgur.com/a/IrV5kdX">User and App Server &amp; DB server</a>
</blockquote>
<script async src="//s.imgur.com/min/embed.js" charset="utf-8"></script>

<p>Gunicormæ˜¯ä¸€å€‹æ”¯æ´å¤šé€²ç¨‹èˆ‡å¤šç·šç¨‹çš„WSGI serverï¼Œé€éGunicorméƒ¨ç½²Flaskï¼Œå¯ä»¥æå‡Serverçš„æ•ˆèƒ½ã€‚Flaskå¯ä»¥æ›´æœ‰æ•ˆç‡çš„è™•ç†request(ç›¸è¼ƒæ–¼Flaskå…§å»ºé–‹ç™¼ç”¨çš„server)ã€‚</p>
<h4 id="Web-Server"><a href="#Web-Server" class="headerlink" title="Web Server"></a>Web Server</h4><p>ç›®å‰serverçš„è¦åŠƒå·²ç¶“æ»¿è¶³å¤§è‡´éœ€æ±‚ï¼Œä¸¦ä¸”æ˜¯ä¸€å€‹å‹•æ…‹ä¼ºæœå™¨(Dynamic Server)ï¼Œå…¶åŠŸèƒ½æ˜¯éå¸¸å¤šå…ƒçš„ï¼Œä½†ä»æœ‰å¹¾é»æ˜¯å¯ä»¥æ”¹å–„çš„ï¼š</p>
<ol>
<li>ä¸€éƒ¨åˆ†çš„userå–®ç´”åªæ˜¯å­˜å–éœæ…‹è³‡æº(e.g. è¨ªå•ç¶²ç«™)ï¼ŒApp serveré›–ç„¶å¯ä»¥è™•ç†ä½†ä»é€ æˆå…¶è² æ“”ã€‚</li>
<li>serverçš„çœŸå¯¦ä½ç½®æš´éœ²åœ¨å¤–å®¹æ˜“è¢«æ”»æ“Šï¼Œå…¶å¯¦useræ ¹æœ¬ä¸åœ¨æ„å¾Œç«¯åˆ°åº•æ˜¯èª°ğŸ¤·ğŸ»ï¼Œåªè¦æ»¿è¶³å…¶éœ€æ±‚å³å¯ã€‚</li>
<li>éš¨è‘—ç¶²ç«™æ“´å¤§ï¼Œä¸»æ©Ÿçš„æ•ˆèƒ½æœ‰å¯èƒ½ç„¡æ³•è² æ“”ï¼Œå¢åŠ App serverçš„åŒæ™‚ï¼Œä¹Ÿéœ€è¦ä¸€å€‹serverçµ±ä¸€å°å¤–ã€‚</li>
</ol>
<p>å› æ­¤æˆ‘å€‘éœ€è¦ä¸€å°Web serverä¾†è™•ç†ä¸Šè¿°çš„ç¼ºé»ï¼Œå¸¸è¦‹çš„æœ‰Apacheèˆ‡Nginx(éŸ³åŒEngine X)ï¼Œè½èNginxé€Ÿåº¦è™•ç†éœæ…‹è³‡æºè¼ƒå¿«ä¸”ä¸è™•ç†å‹•æ…‹è³‡æºï¼Œå‰›å¥½Gunicormå·²ç¶“å‹ä»»é€™ä»½å·¥ä½œğŸ¤“ï¼Œå› æ­¤é€™è£¡ä»¥Nginxä½œç‚ºç¤ºç¯„ã€‚</p>
<blockquote class="imgur-embed-pub" lang="en" data-id="a/0EBosRA">
    <a target="_blank" rel="noopener" href="//imgur.com/a/0EBosRA">User, Web server, App server and DB server</a>
</blockquote>
<script async src="//s.imgur.com/min/embed.js" charset="utf-8"></script>

<p>Nginxè¢«è¨­ç½®åœ¨æœ€å¤–å±¤ï¼Œç•¶Userç™¼é€requestæ™‚ï¼ŒNginx(Web server)æœƒå…ˆæŸ¥çœ‹requestï¼Œå¦‚æœUserçš„requestæ˜¯Web serverç«¯å·²ç¶“æœ‰çš„éœæ…‹è³‡æºï¼ŒNginxæœƒç›´æ¥è¿”å›responeï¼Œç„¡éœ€åœ¨å‘å¾Œå‚³éï¼Œæ¸›å°‘App serverçš„è² æ“”ã€‚åä¹‹ï¼Œå†å‚³é€åˆ°Gunicorm(App server)ã€‚<br>é€™æ¨£è¨­ç½®çš„å„ªé»æ˜¯ï¼š</p>
<ol>
<li>éš±è—App serverçš„çœŸå¯¦IPï¼Œé¿å…å—åˆ°æ”»æ“Šã€‚(åå‘ä»£ç†)</li>
<li>æ¸›å°‘App serverçš„è² æ“”ï¼ŒåŠ é€ŸUserå­˜å–æ™‚é–“ã€‚</li>
<li>éš¨è‘—App serveræ•¸é‡å¢åŠ æ™‚ï¼Œæ¯ä¸€å€‹App serveræ€§èƒ½æˆ–åŠŸèƒ½æœ‰å¯èƒ½ä¸åŒï¼ŒNginxå¯ä»¥è¨­å®šæœ‰æ•ˆç‡çš„æ¨¡å¼åˆ†é…requestçµ¦App serverã€‚</li>
</ol>
<h4 id="Reverse-Proxy-Forward-Proxy"><a href="#Reverse-Proxy-Forward-Proxy" class="headerlink" title="Reverse Proxy &amp; Forward Proxy"></a>Reverse Proxy &amp; Forward Proxy</h4><p>æˆ‘å€‘éƒ½çŸ¥é“ç¶²è·¯ç•¶ä¸­å­˜åœ¨è¨±å¤šnode(ç¯€é»)ï¼Œæ¯ä¸€å€‹nodeéƒ½æ˜¯ä¸€å°ä¸»æ©Ÿã€‚åœ¨ç¶²è·¯çš„èŒ«èŒ«å¤§æµ·ä¸–ç•Œå¦‚ä½•æ‰¾åˆ°æ¬²è¨ªå•çš„ä¸»æ©ŸIPå‘¢?é€™æ™‚Proxy server(ä»£ç†ä¼ºæœå™¨)å°±éå¸¸é‡è¦ï¼ŒProxy serveræœƒè¨˜éŒ„åº•ä¸‹æ‰€æœ‰nodeçš„IPï¼Œç•¶requestç¶“éæ™‚ï¼ŒProxy serveræœƒå°‡ä½ çš„requestè½‰ç™¼åˆ°å°æ‡‰çš„IPã€‚è€Œä½ ä¸éœ€è¦çŸ¥é“ä¸­é–“åˆ°åº•ç¶“éäº†å¤šå°‘Proxy serverå°±å¯ä»¥å­˜å–ç›®æ¨™IPï¼Œé€™å°±æ˜¯æ‰€è¬‚çš„Forward Proxy(æ­£å‘ä»£ç†)ã€‚</p>
<p>è€ŒUseråœ¨ç™¼é€requestçµ¦serveræ™‚ï¼Œä»–çš„ç›®æ¨™æ˜¯å­˜å–è³‡æ–™ï¼Œè€Œä¸æ˜¯serverçš„ä½ç½®ã€‚å› æ­¤ç‚ºäº†ä¿è­·App serverä¸å—æ”»æ“Šï¼Œé€šå¸¸æœƒåœ¨æœ€å¤–å±¤æ¶è¨­Web serverï¼ŒWeb serveræœƒå°‡requestä¾ç…§è¨­å®šè½‰ç™¼åˆ°ä¸åŒçš„App serverï¼ŒApp serverè™•ç†å®Œå¾Œä¹Ÿæœƒé€éWeb serverå†è¿”å›çµ¦Userï¼Œå¦‚æ­¤Useræ—¢ä¸çŸ¥é“App serverçš„çœŸå¯¦ä½ç½®ä¹Ÿèƒ½å­˜å–è³‡æ–™ï¼Œé€™å°±æ˜¯Reverse Proxy(åå‘ä»£ç†)ã€‚</p>
<h4 id="Web-server-Load-Balance"><a href="#Web-server-Load-Balance" class="headerlink" title="Web server(Load Balance)"></a>Web server(Load Balance)</h4><blockquote>
<p>æˆ‘ä¸èƒ½ç”¨ç”¨ä¸€å°App serverå–ä»£Web serverçš„åŠŸç”¨å—?</p>
</blockquote>
<p>èˆ‰ä¾‹ä¾†èªªï¼Œä¹‹å‰æˆ‘å€‘çš„éƒ¨ç½²å°‡åƒæ˜¯ä¸€å€‹ç§å»š(App server)è™•ç†æ¯ä¸€å€‹å®¢äºº(User)çš„å®¢è£½åŒ–çš„é¤é»(request)ï¼Œä½†ä¹Ÿæ˜¯æœ‰å¾ˆå¤šäººå®¢äººåªæ˜¯è¦ä¸€å€‹ç°¡æ˜“çš„å¾®æ³¢é£Ÿå“(éœæ…‹è³‡æº)ï¼Œå¦‚æœä½ çš„å‰å°æœå‹™ç”Ÿ(Web server)å¯ä»¥å¿«é€Ÿè™•ç†ä¸¦é€é¤(response)ï¼Œå°±ä¸æœƒå°è‡´ä½ çš„ç§å»šè¦æ–™ç†åˆè¦å¾®æ³¢çš„çª˜å¢ƒï¼Œä¸”å®¢äººä¹Ÿèƒ½æ›´å¿«æ”¶åˆ°é¤é»ã€‚ç•¶ç„¶Flaskä¹Ÿèƒ½è™•ç†ï¼Œåªæ˜¯Nginxè¡¨ç¾æ›´å¥½ğŸ‘ğŸ»</p>
<blockquote class="imgur-embed-pub" lang="en" data-id="a/E1LBJlf">
    <a target="_blank" rel="noopener" href="//imgur.com/a/E1LBJlf">Web server To many App server</a>
</blockquote>
<script async src="//s.imgur.com/min/embed.js" charset="utf-8"></script>

<p>å¦‚ä¸Šè¿°æ‰€èªªï¼Œç•¶ä½ çš„App serverå¢åŠ æ™‚ï¼ŒNginxä¹Ÿèƒ½æœ‰æ•ˆç‡çš„åˆ†é…requestçµ¦æ¯ä¸€å€‹App server(Load Balance)ï¼Œä¸€åˆ‡å–æ±ºæ–¼ä½ çš„è¨­å®šã€‚Nginxåˆ†é…App serveræ¨¡å¼å¯ä»¥è¨­å®šæˆï¼š</p>
<ol>
<li>round-robin(è¼ªè©¢)ï¼šå°‡requestä¾åºåˆ†é…åˆ°App serverï¼Œä¹Ÿæ˜¯Nginxé è¨­çš„æ¨¡å¼ã€‚</li>
<li>weight round-robin(æ¬Šé‡)ï¼šå°‡App serverè¨­å®šweightï¼Œè¨­å®šè¶Šå¤§å‰‡åˆ†é…è¶Šå¤šrequestã€‚æ€§èƒ½è¶Šå¼·çš„App serverå¯ä»¥é©æ™‚æé«˜weightä¾†å¹³è¡¡ã€‚</li>
<li>least-connected(æœ€å°‘é€£ç·š)ï¼šåˆ†é…requestçµ¦ç•¶å‰æœ€å°‘é€£ç·šçš„App serverã€‚</li>
<li>IP-hashï¼šå°‡requestçš„IPé€éhash tableç´€éŒ„åœ¨å†Šï¼Œè®“ç›¸åŒIPå†æ¬¡ç™¼é€requestæ™‚é€£ç·šåˆ°ç›¸åŒçš„App serverã€‚è‹¥App serveræœ‰å­˜å–Userçš„session(e.g. å„²å­˜è³¼ç‰©è»Š)ï¼Œå¯ä½¿ç”¨æ­¤æ¨¡å¼è®“Useræ¯æ¬¡é€£åˆ°ç›¸åŒApp serverã€‚</li>
</ol>
<h3 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h3><ul>
<li><input checked="" disabled="" type="checkbox"> ä½¿ç”¨Guicorméƒ¨ç½²Flaskï¼Œå½Œè£œFlaskåŸç”Ÿé–‹ç™¼serveræ•ˆèƒ½ä¸è¶³ã€‚</li>
<li><input checked="" disabled="" type="checkbox"> ç­è§£WSGI serverä½œç”¨ã€‚</li>
<li><input checked="" disabled="" type="checkbox"> Web serverå¯ä»¥æœ‰æ•ˆçš„åˆ†é…requestçµ¦App serverã€‚(Load Balance)</li>
<li><input checked="" disabled="" type="checkbox"> Web serverå¯ä»¥éš±è—App serverçš„ä½ç½®(Reverse Proxy)</li>
<li><input checked="" disabled="" type="checkbox"> å¦‚ä½•é©ç•¶éƒ¨ç½²serverã€‚</li>
</ul>
<h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4><ul>
<li><a target="_blank" rel="noopener" href="https://minglunwu.com/notes/2021/flask_plus_wsgi.html/">Flaskæƒ³ä¸Šç·š? ä½ é‚„éœ€è¦ä¸€äº›é…·æ±è¥¿</a></li>
<li><a target="_blank" rel="noopener" href="https://oldmo860617.medium.com/%E9%80%B2%E7%A8%8B-%E7%B7%9A%E7%A8%8B-%E5%8D%94%E7%A8%8B-%E5%82%BB%E5%82%BB%E5%88%86%E5%BE%97%E6%B8%85%E6%A5%9A-a09b95bd68dd">ç¨‹åº(é€²ç¨‹)ã€åŸ·è¡Œç·’(ç·šç¨‹)ã€å”ç¨‹ï¼Œå‚»å‚»åˆ†å¾—æ¸…æ¥šï¼</a></li>
<li><a target="_blank" rel="noopener" href="https://www.maxlist.xyz/2020/05/06/flask-wsgi-nginx/">ã€Flaskæ•™å­¸ç³»åˆ—ã€‘Flask ç‚ºç”šéº¼éœ€è¦ WSGI èˆ‡ Nginx</a></li>
<li><a target="_blank" rel="noopener" href="https://www.maxlist.xyz/2020/06/18/flask-nginx/">æ·ºè«‡ Nginx åŸºæœ¬é…ç½®ã€è² è¼‰å‡è¡¡ã€ç·©å­˜å’Œåå‘ä»£ç†</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/python/" rel="tag"># python</a>
              <a href="/tags/flask/" rel="tag"># flask</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Python/Flask/flask/flask-wtf/" rel="prev" title="Python Flask - ä½¿ç”¨ WTForm å¿«é€Ÿå»ºç«‹è¡¨å–® feet. flaskæª”æ¡ˆä½ˆå±€ & bootstrap">
                  <i class="fa fa-chevron-left"></i> Python Flask - ä½¿ç”¨ WTForm å¿«é€Ÿå»ºç«‹è¡¨å–® feet. flaskæª”æ¡ˆä½ˆå±€ & bootstrap
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Python/Flask/flask/flask-4/" rel="next" title="Python Flask æ¦‚å¿µèˆ‡å¯¦ä½œ(å››) - é€£æ¥è³‡æ–™åº«">
                  Python Flask æ¦‚å¿µèˆ‡å¯¦ä½œ(å››) - é€£æ¥è³‡æ–™åº« <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2026</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Muchian</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>ç¸½å­—æ•¸ï¼š</span>
    <span title="ç¸½å­—æ•¸">133k</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="è¨ªå®¢ç¸½æ•¸">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="ç¸½ç€è¦½æ¬¡æ•¸">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.4.3/mermaid.min.js","integrity":"sha256-e0o3JYsdjqKajf9eOe22FhioYSz9WofRY4dLKo3F6do="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>




  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"mcdaily","count":false,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
